{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, deleteDoc, doc, updateDoc } from \"firebase/firestore\";\nimport db from \"../config\";\nimport { useNavigation } from '@react-navigation/native';\nimport { Card, Title, Paragraph } from 'react-native-paper';\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar PeintureList = function PeintureList() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    oeuvres = _useState2[0],\n    setOeuvres = _useState2[1];\n  var navigation = useNavigation();\n  useEffect(function () {\n    var fetchOeuvres = function () {\n      var _ref = _asyncToGenerator(function* () {\n        var oeuvresCollection = collection(db, \"oeuvres\");\n        var snapshot = yield getDocs(oeuvresCollection);\n        var oeuvresData = snapshot.docs.map(function (doc) {\n          return _objectSpread({\n            id: doc.id\n          }, doc.data());\n        });\n        setOeuvres(oeuvresData);\n      });\n      return function fetchOeuvres() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    fetchOeuvres();\n  }, []);\n  var handleDelete = function () {\n    var _ref2 = _asyncToGenerator(function* (id) {\n      yield deleteDoc(doc(db, \"oeuvres\", id));\n      setOeuvres(function (prevState) {\n        return prevState.filter(function (oeuvre) {\n          return oeuvre.id !== id;\n        });\n      });\n    });\n    return function handleDelete(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleEdit = function () {\n    var _ref3 = _asyncToGenerator(function* (id, field, value) {\n      var oeuvreRef = doc(db, \"oeuvres\", id);\n      yield updateDoc(oeuvreRef, _defineProperty({}, field, value));\n      setOeuvres(function (prevState) {\n        return prevState.map(function (oeuvre) {\n          return oeuvre.id === id ? _objectSpread(_objectSpread({}, oeuvre), {}, _defineProperty({}, field, value)) : oeuvre;\n        });\n      });\n    });\n    return function handleEdit(_x2, _x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(View, {\n    children: _jsx(View, {\n      style: {\n        flexDirection: 'row',\n        flexWrap: 'wrap'\n      },\n      children: oeuvres.map(function (oeuvre) {\n        return _jsxs(Card, {\n          style: {\n            margin: 8,\n            width: '30%'\n          },\n          children: [_jsx(Card.Cover, {\n            source: {\n              uri: oeuvre.image\n            }\n          }), _jsx(Card.Content, {\n            children: _jsx(Title, {\n              onPress: function onPress() {\n                return navigation.navigate('OeuvreDetail', {\n                  id: oeuvre.id\n                });\n              },\n              children: oeuvre.nom\n            })\n          })]\n        }, oeuvre.id);\n      })\n    })\n  });\n};\nexport default PeintureList;","map":{"version":3,"names":["React","useState","useEffect","collection","getDocs","deleteDoc","doc","updateDoc","db","useNavigation","Card","Title","Paragraph","View","Button","jsx","_jsx","jsxs","_jsxs","PeintureList","_useState","_useState2","_slicedToArray","oeuvres","setOeuvres","navigation","fetchOeuvres","_ref","_asyncToGenerator","oeuvresCollection","snapshot","oeuvresData","docs","map","_objectSpread","id","data","apply","arguments","handleDelete","_ref2","prevState","filter","oeuvre","_x","handleEdit","_ref3","field","value","oeuvreRef","_defineProperty","_x2","_x3","_x4","children","style","flexDirection","flexWrap","margin","width","Cover","source","uri","image","Content","onPress","navigate","nom"],"sources":["C:/Users/ing/Documents/M1_DEV/Rendu/composants/front/PeintureList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { collection, getDocs, deleteDoc, doc, updateDoc } from \"firebase/firestore\";\r\nimport db from '../config';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Card, Title, Paragraph } from 'react-native-paper';\r\nimport { View, Button } from 'react-native';\r\n\r\nconst PeintureList = () => {\r\n    const [oeuvres, setOeuvres] = useState([]);\r\n    const navigation = useNavigation(); \r\n\r\n    useEffect(() => {\r\n        const fetchOeuvres = async () => {\r\n            const oeuvresCollection = collection(db, \"oeuvres\");\r\n            const snapshot = await getDocs(oeuvresCollection);\r\n\r\n            const oeuvresData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n            setOeuvres(oeuvresData);\r\n        }\r\n\r\n        fetchOeuvres();\r\n    }, []);\r\n\r\n    const handleDelete = async (id) => {\r\n        await deleteDoc(doc(db, \"oeuvres\", id));\r\n        setOeuvres(prevState => prevState.filter(oeuvre => oeuvre.id !== id));\r\n    }\r\n\r\n    const handleEdit = async (id, field, value) => {\r\n        const oeuvreRef = doc(db, \"oeuvres\", id);\r\n        await updateDoc(oeuvreRef, { [field]: value });\r\n        setOeuvres(prevState => prevState.map(oeuvre => oeuvre.id === id ? { ...oeuvre, [field]: value } : oeuvre));\r\n    }\r\n\r\n    return (\r\n        <View>\r\n         \r\n            <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\r\n                {oeuvres.map(oeuvre => (\r\n                    <Card key={oeuvre.id} style={{ margin: 8, width: '30%' }}>\r\n                        <Card.Cover source={{ uri: oeuvre.image }}  />\r\n                        <Card.Content>\r\n                            <Title onPress={() => navigation.navigate('OeuvreDetail', { id: oeuvre.id })}>{oeuvre.nom}</Title>\r\n                           \r\n                        </Card.Content>\r\n                    </Card>\r\n                ))}\r\n            </View>\r\n        </View>\r\n    );\r\n}\r\n\r\nexport default PeintureList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}