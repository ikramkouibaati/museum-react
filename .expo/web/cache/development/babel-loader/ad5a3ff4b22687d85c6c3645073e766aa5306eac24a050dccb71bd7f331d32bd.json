{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, deleteDoc, doc, updateDoc } from \"firebase/firestore\";\nimport db from \"../config\";\nimport { useNavigation } from '@react-navigation/native';\nimport { Button as PaperButton } from 'react-native-paper';\nimport \"./GetAllpeinture.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar GetAllpeinture = function GetAllpeinture() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    oeuvres = _useState2[0],\n    setOeuvres = _useState2[1];\n  var navigation = useNavigation();\n  useEffect(function () {\n    var fetchOeuvres = function () {\n      var _ref = _asyncToGenerator(function* () {\n        var oeuvresCollection = collection(db, \"oeuvres\");\n        var snapshot = yield getDocs(oeuvresCollection);\n        var oeuvresData = snapshot.docs.map(function (doc) {\n          return _objectSpread({\n            id: doc.id\n          }, doc.data());\n        });\n        setOeuvres(oeuvresData);\n      });\n      return function fetchOeuvres() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    fetchOeuvres();\n  }, []);\n  var handleDelete = function () {\n    var _ref2 = _asyncToGenerator(function* (id) {\n      yield deleteDoc(doc(db, \"oeuvres\", id));\n      setOeuvres(function (prevState) {\n        return prevState.filter(function (oeuvre) {\n          return oeuvre.id !== id;\n        });\n      });\n    });\n    return function handleDelete(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleEdit = function () {\n    var _ref3 = _asyncToGenerator(function* (id, field, value) {\n      var oeuvreRef = doc(db, \"oeuvres\", id);\n      yield updateDoc(oeuvreRef, _defineProperty({}, field, value));\n      setOeuvres(function (prevState) {\n        return prevState.map(function (oeuvre) {\n          return oeuvre.id === id ? _objectSpread(_objectSpread({}, oeuvre), {}, _defineProperty({}, field, value)) : oeuvre;\n        });\n      });\n    });\n    return function handleEdit(_x2, _x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsxs(\"div\", {\n    className: \"art-exhibition\",\n    children: [_jsx(PaperButton, {\n      mode: \"contained\",\n      onPress: function onPress() {\n        return navigation.navigate('PostPeinture');\n      },\n      style: {\n        marginBottom: 10\n      },\n      className: \"button\",\n      children: \"Ajouter une nouvelle peinture\"\n    }), _jsxs(\"table\", {\n      children: [_jsx(\"thead\", {\n        children: _jsxs(\"tr\", {\n          children: [_jsx(\"th\", {\n            children: \"ID\"\n          }), _jsx(\"th\", {\n            children: \"Nom\"\n          }), _jsx(\"th\", {\n            children: \"Description\"\n          }), _jsx(\"th\", {\n            children: \"Image\"\n          }), _jsx(\"th\", {\n            children: \"Auteur\"\n          }), _jsx(\"th\", {\n            children: \"Date de cr\\xE9ation\"\n          }), _jsx(\"th\", {\n            children: \"User ID\"\n          }), _jsx(\"th\", {\n            children: \"Action\"\n          })]\n        })\n      }), _jsx(\"tbody\", {\n        children: oeuvres.map(function (oeuvre) {\n          return _jsxs(\"tr\", {\n            children: [_jsx(\"td\", {\n              children: oeuvre.id\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'nom', e.target.textContent);\n              },\n              children: oeuvre.nom\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'description', e.target.textContent);\n              },\n              children: oeuvre.description\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'image', e.target.textContent);\n              },\n              children: oeuvre.image\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'auteur', e.target.textContent);\n              },\n              children: oeuvre.auteur\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'date_creation', e.target.textContent);\n              },\n              children: oeuvre.dateCreation\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'user_id', e.target.textContent);\n              },\n              children: oeuvre.userId\n            }), _jsx(\"td\", {\n              children: _jsx(\"button\", {\n                onClick: function onClick() {\n                  return handleDelete(oeuvre.id);\n                },\n                children: \"Supprimer\"\n              })\n            })]\n          }, oeuvre.id);\n        })\n      })]\n    })]\n  });\n};\nexport default GetAllpeinture;","map":{"version":3,"names":["React","useState","useEffect","collection","getDocs","deleteDoc","doc","updateDoc","db","useNavigation","Button","PaperButton","jsx","_jsx","jsxs","_jsxs","GetAllpeinture","_useState","_useState2","_slicedToArray","oeuvres","setOeuvres","navigation","fetchOeuvres","_ref","_asyncToGenerator","oeuvresCollection","snapshot","oeuvresData","docs","map","_objectSpread","id","data","apply","arguments","handleDelete","_ref2","prevState","filter","oeuvre","_x","handleEdit","_ref3","field","value","oeuvreRef","_defineProperty","_x2","_x3","_x4","className","children","mode","onPress","navigate","style","marginBottom","contentEditable","onBlur","e","target","textContent","nom","description","image","auteur","dateCreation","userId","onClick"],"sources":["C:/Users/ing/Documents/M1_DEV/Rendu/composants/back/GetAllpeinture.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { collection, getDocs, deleteDoc, doc, updateDoc } from \"firebase/firestore\";\r\nimport db from '../config';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Button as PaperButton } from 'react-native-paper';\r\nimport './GetAllpeinture.css'; \r\n\r\nconst GetAllpeinture = () => {\r\n    const [oeuvres, setOeuvres] = useState([]);\r\n    const navigation = useNavigation(); \r\n\r\n    useEffect(() => {\r\n        const fetchOeuvres = async () => {\r\n            const oeuvresCollection = collection(db, \"oeuvres\");\r\n            const snapshot = await getDocs(oeuvresCollection);\r\n\r\n            const oeuvresData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n            setOeuvres(oeuvresData);\r\n        }\r\n\r\n        fetchOeuvres();\r\n    }, []);\r\n\r\n    const handleDelete = async (id) => {\r\n        await deleteDoc(doc(db, \"oeuvres\", id));\r\n        setOeuvres(prevState => prevState.filter(oeuvre => oeuvre.id !== id));\r\n    }\r\n\r\n    const handleEdit = async (id, field, value) => {\r\n        const oeuvreRef = doc(db, \"oeuvres\", id);\r\n        await updateDoc(oeuvreRef, { [field]: value });\r\n        setOeuvres(prevState => prevState.map(oeuvre => oeuvre.id === id ? { ...oeuvre, [field]: value } : oeuvre));\r\n    }\r\n\r\n    return (\r\n        <div className=\"art-exhibition\"> \r\n            <PaperButton\r\n                mode=\"contained\"\r\n                onPress={() => navigation.navigate('PostPeinture')}\r\n                style={{ marginBottom: 10 }}\r\n                className=\"button\"\r\n            >\r\n                Ajouter une nouvelle peinture\r\n            </PaperButton>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>Nom</th>\r\n                        <th>Description</th>\r\n                        <th>Image</th>\r\n                        <th>Auteur</th>\r\n                        <th>Date de cr√©ation</th>\r\n                        <th>User ID</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {oeuvres.map(oeuvre => (\r\n                        <tr key={oeuvre.id}>\r\n                            <td>{oeuvre.id}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'nom', e.target.textContent)}>{oeuvre.nom}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'description', e.target.textContent)}>{oeuvre.description}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'image', e.target.textContent)}>{oeuvre.image}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'auteur', e.target.textContent)}>{oeuvre.auteur}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'date_creation', e.target.textContent)}>{oeuvre.dateCreation}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'user_id', e.target.textContent)}>{oeuvre.userId}</td>\r\n                            <td><button onClick={() => handleDelete(oeuvre.id)}>Supprimer</button></td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GetAllpeinture;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}