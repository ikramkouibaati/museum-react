{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { TextInput, Button, Divider } from 'react-native-paper';\nimport { schemaOeuvres } from \"../../verif/oeuvres\";\nimport db from \"../config\";\nimport { collection, addDoc } from 'firebase/firestore';\nimport * as ImagePicker from 'expo-image-picker';\nimport { useNavigation } from '@react-navigation/native';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar Profile = function Profile() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    role = _useState4[0],\n    setRole = _useState4[1];\n  var navigation = useNavigation();\n  useEffect(function () {\n    var getEmailAndRole = function () {\n      var _ref = _asyncToGenerator(function* () {\n        var storedEmail = yield AsyncStorage.getItem('email');\n        var storedRole = yield AsyncStorage.getItem('role');\n        setEmail(storedEmail);\n        setRole(storedRole);\n      });\n      return function getEmailAndRole() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    getEmailAndRole();\n  }, []);\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    nom = _useState6[0],\n    setNom = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    description = _useState8[0],\n    setDescription = _useState8[1];\n  var _useState9 = useState(\"\"),\n    _useState10 = _slicedToArray(_useState9, 2),\n    image = _useState10[0],\n    setImage = _useState10[1];\n  var _useState11 = useState(\"\"),\n    _useState12 = _slicedToArray(_useState11, 2),\n    auteur = _useState12[0],\n    setAuteur = _useState12[1];\n  var _useState13 = useState(\"\"),\n    _useState14 = _slicedToArray(_useState13, 2),\n    dateCreation = _useState14[0],\n    setDateCreation = _useState14[1];\n  var _useState15 = useState(\"\"),\n    _useState16 = _slicedToArray(_useState15, 2),\n    userId = _useState16[0],\n    setUserId = _useState16[1];\n  var handleSubmit = function handleSubmit() {\n    console.log(nom, description, image, auteur, dateCreation, userId);\n    var formattedDate = new Date(dateCreation);\n    var oeuvre = {\n      nom: nom,\n      description: description,\n      image: image,\n      auteur: auteur,\n      dateCreation: dateCreation,\n      userId: userId\n    };\n    var _schemaOeuvres$valida = schemaOeuvres.validate(oeuvre, {\n        abortEarly: false\n      }),\n      error = _schemaOeuvres$valida.error;\n    console.log(error);\n    if (!error) {\n      addDoc(collection(db, \"oeuvres\"), oeuvre).then(function () {\n        navigation.navigate('Home');\n      }).catch(function (error) {\n        console.error('Error adding document: ', error);\n      });\n    }\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(Text, {\n      children: [\"Bienvenue, \", email]\n    }), _jsxs(Text, {\n      children: [\"Role: \", role]\n    }), _jsx(Divider, {\n      style: styles.divider\n    }), _jsx(Text, {\n      children: \"Ajouter une oeuvre\"\n    }), _jsx(TextInput, {\n      label: \"Nom\",\n      value: nom,\n      onChangeText: function onChangeText(text) {\n        return setNom(text);\n      },\n      style: styles.input\n    }), _jsx(TextInput, {\n      label: \"Description\",\n      value: description,\n      onChangeText: function onChangeText(text) {\n        return setDescription(text);\n      },\n      style: styles.input\n    }), _jsx(TextInput, {\n      label: \"Image\",\n      value: image,\n      onChangeText: function onChangeText(text) {\n        return setImage(text);\n      },\n      style: styles.input\n    }), _jsx(TextInput, {\n      label: \"Auteur\",\n      value: auteur,\n      onChangeText: function onChangeText(text) {\n        return setAuteur(text);\n      },\n      style: styles.input\n    }), _jsx(TextInput, {\n      label: \"Date de cr\\xE9ation ajouter -06-29T00:00:00.000Z apres l'ann\\xE9e\",\n      value: dateCreation,\n      onChangeText: function onChangeText(text) {\n        return setDateCreation(text);\n      },\n      style: styles.input\n    }), _jsx(TextInput, {\n      label: \"User ID\",\n      value: userId,\n      onChangeText: function onChangeText(text) {\n        return setUserId(text);\n      },\n      style: styles.input\n    }), _jsx(Button, {\n      mode: \"contained\",\n      onPress: handleSubmit,\n      style: styles.button,\n      children: \"Cr\\xE9er\"\n    })]\n  });\n};\nexport default Profile;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    padding: 16\n  },\n  input: {\n    marginBottom: 10\n  },\n  button: {\n    marginTop: 20\n  },\n  divider: {\n    marginVertical: 20,\n    height: 1,\n    backgroundColor: 'gray'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","AsyncStorage","StyleSheet","TextInput","Button","Divider","schemaOeuvres","db","collection","addDoc","ImagePicker","useNavigation","jsxs","_jsxs","jsx","_jsx","Profile","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","role","setRole","navigation","getEmailAndRole","_ref","_asyncToGenerator","storedEmail","getItem","storedRole","apply","arguments","_useState5","_useState6","nom","setNom","_useState7","_useState8","description","setDescription","_useState9","_useState10","image","setImage","_useState11","_useState12","auteur","setAuteur","_useState13","_useState14","dateCreation","setDateCreation","_useState15","_useState16","userId","setUserId","handleSubmit","console","log","formattedDate","Date","oeuvre","_schemaOeuvres$valida","validate","abortEarly","error","then","navigate","catch","style","styles","container","children","divider","label","value","onChangeText","text","input","mode","onPress","button","create","flex","justifyContent","padding","marginBottom","marginTop","marginVertical","height","backgroundColor"],"sources":["C:/Users/ing/Documents/M1_DEV/Rendu/composants/front/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text } from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nimport { StyleSheet } from 'react-native';\r\nimport { TextInput, Button, Divider  } from 'react-native-paper';\r\nimport { schemaOeuvres } from '../../verif/oeuvres';\r\nimport db from '../config';\r\nimport { collection, addDoc } from 'firebase/firestore';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\n\r\n\r\nconst Profile = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [role, setRole] = useState('');\r\n  const navigation = useNavigation();\r\n\r\n\r\n  useEffect(() => {\r\n    const getEmailAndRole = async () => {\r\n      const storedEmail = await AsyncStorage.getItem('email');\r\n      const storedRole = await AsyncStorage.getItem('role');\r\n      setEmail(storedEmail);\r\n      setRole(storedRole);\r\n    };\r\n    getEmailAndRole();\r\n  }, []);\r\n\r\n\r\n  const [nom, setNom] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [auteur, setAuteur] = useState(\"\");\r\n  const [dateCreation, setDateCreation] = useState(\"\");\r\n  const [userId, setUserId] = useState(\"\");\r\n\r\n\r\n  const handleSubmit = () => {\r\n    console.log(nom, description, image, auteur, dateCreation, userId);\r\n    const formattedDate = new Date(dateCreation);\r\n  \r\n    const oeuvre = {\r\n      nom,\r\n      description,\r\n      image,\r\n      auteur,\r\n      dateCreation: dateCreation,\r\n      userId: userId\r\n    };\r\n  \r\n    const { error } = schemaOeuvres.validate(oeuvre, { abortEarly: false });\r\n  \r\n    console.log(error);\r\n  \r\n    if (!error) {\r\n      addDoc(collection(db, \"oeuvres\"), oeuvre)\r\n        .then(() => {\r\n        \r\n          navigation.navigate('Home');\r\n        })\r\n        .catch(error => {\r\n          console.error('Error adding document: ', error);\r\n        });\r\n    }\r\n  }\r\n  \r\n\r\n  return (\r\n    <View style={styles.container}>\r\n    <Text>Bienvenue, {email}</Text>\r\n    <Text>Role: {role}</Text>\r\n  \r\n    <Divider style={styles.divider} /> \r\n\r\n    <Text>Ajouter une oeuvre</Text>\r\n    <TextInput\r\n      label=\"Nom\"\r\n      value={nom}\r\n      onChangeText={text => setNom(text)}\r\n      style={styles.input}\r\n    />\r\n    <TextInput\r\n      label=\"Description\"\r\n      value={description}\r\n      onChangeText={text => setDescription(text)}\r\n      style={styles.input}\r\n    />\r\n    <TextInput\r\n      label=\"Image\"\r\n      value={image}\r\n      onChangeText={text => setImage(text)}\r\n      style={styles.input}\r\n    />\r\n    <TextInput\r\n      label=\"Auteur\"\r\n      value={auteur}\r\n      onChangeText={text => setAuteur(text)}\r\n      style={styles.input}\r\n    />\r\n    <TextInput\r\n      label=\"Date de création ajouter -06-29T00:00:00.000Z apres l'année\"\r\n      value={dateCreation}\r\n      onChangeText={text => setDateCreation(text)}\r\n      style={styles.input}\r\n    />\r\n    <TextInput\r\n      label=\"User ID\"\r\n      value={userId}\r\n      onChangeText={text => setUserId(text)}\r\n      style={styles.input}\r\n    />\r\n    <Button mode=\"contained\" onPress={handleSubmit} style={styles.button}>\r\n      Créer\r\n    </Button>\r\n  </View>\r\n);\r\n};\r\n\r\n\r\nexport default Profile;\r\n\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    padding: 16,\r\n  },\r\n  input: {\r\n    marginBottom: 10,\r\n  },\r\n  button: {\r\n    marginTop: 20,\r\n  },\r\n  divider: {\r\n    marginVertical: 20,\r\n    height: 1,\r\n    backgroundColor: 'gray', \r\n  },\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}