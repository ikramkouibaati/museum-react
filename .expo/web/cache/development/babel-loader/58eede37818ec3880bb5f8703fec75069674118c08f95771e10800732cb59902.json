{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, deleteDoc, doc, updateDoc } from \"firebase/firestore\";\nimport db from \"../config\";\nimport { useNavigation } from '@react-navigation/native';\nimport { Link } from 'react-router-dom';\nimport \"./GetAllUsers.css\";\nimport { Button as PaperButton } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar GetAllUsers = function GetAllUsers() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    users = _useState2[0],\n    setUsers = _useState2[1];\n  var navigation = useNavigation();\n  useEffect(function () {\n    var fetchOeuvres = function () {\n      var _ref = _asyncToGenerator(function* () {\n        var oeuvresCollection = collection(db, \"users\");\n        var snapshot = yield getDocs(oeuvresCollection);\n        var oeuvresData = snapshot.docs.map(function (doc) {\n          return _objectSpread({\n            id: doc.id\n          }, doc.data());\n        });\n        setUsers(oeuvresData);\n      });\n      return function fetchOeuvres() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    fetchOeuvres();\n  }, []);\n  var handleDelete = function () {\n    var _ref2 = _asyncToGenerator(function* (id) {\n      yield deleteDoc(doc(db, \"users\", id));\n      setUsers(function (prevState) {\n        return prevState.filter(function (oeuvre) {\n          return oeuvre.id !== id;\n        });\n      });\n    });\n    return function handleDelete(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleEdit = function () {\n    var _ref3 = _asyncToGenerator(function* (id, field, value) {\n      var oeuvreRef = doc(db, \"users\", id);\n      yield updateDoc(oeuvreRef, _defineProperty({}, field, value));\n      setUsers(function (prevState) {\n        return prevState.map(function (oeuvre) {\n          return oeuvre.id === id ? _objectSpread(_objectSpread({}, oeuvre), {}, _defineProperty({}, field, value)) : oeuvre;\n        });\n      });\n    });\n    return function handleEdit(_x2, _x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsxs(\"div\", {\n    className: \"art-exhibition\",\n    children: [_jsx(PaperButton, {\n      mode: \"contained\",\n      onPress: function onPress() {\n        return navigation.navigate('PostUsers');\n      },\n      style: {\n        marginBottom: 10\n      },\n      className: \"button\",\n      children: \"Ajouter un nouveau User\"\n    }), _jsxs(\"table\", {\n      children: [_jsx(\"thead\", {\n        children: _jsxs(\"tr\", {\n          children: [_jsx(\"th\", {\n            children: \"ID\"\n          }), _jsx(\"th\", {\n            children: \"Email\"\n          }), _jsx(\"th\", {\n            children: \"Role\"\n          }), _jsx(\"th\", {\n            children: \"Action\"\n          })]\n        })\n      }), _jsx(\"tbody\", {\n        children: users.map(function (oeuvre) {\n          return _jsxs(\"tr\", {\n            children: [_jsx(\"td\", {\n              children: oeuvre.id\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'email', e.target.textContent);\n              },\n              children: oeuvre.email\n            }), _jsx(\"td\", {\n              contentEditable: true,\n              onBlur: function onBlur(e) {\n                return handleEdit(oeuvre.id, 'role', e.target.textContent);\n              },\n              children: oeuvre.role\n            }), _jsx(\"td\", {\n              children: _jsx(\"button\", {\n                onClick: function onClick() {\n                  return handleDelete(oeuvre.id);\n                },\n                children: \"Supprimer\"\n              })\n            })]\n          }, oeuvre.id);\n        })\n      })]\n    })]\n  });\n};\nexport default GetAllUsers;","map":{"version":3,"names":["React","useState","useEffect","collection","getDocs","deleteDoc","doc","updateDoc","db","useNavigation","Link","Button","PaperButton","jsx","_jsx","jsxs","_jsxs","GetAllUsers","_useState","_useState2","_slicedToArray","users","setUsers","navigation","fetchOeuvres","_ref","_asyncToGenerator","oeuvresCollection","snapshot","oeuvresData","docs","map","_objectSpread","id","data","apply","arguments","handleDelete","_ref2","prevState","filter","oeuvre","_x","handleEdit","_ref3","field","value","oeuvreRef","_defineProperty","_x2","_x3","_x4","className","children","mode","onPress","navigate","style","marginBottom","contentEditable","onBlur","e","target","textContent","email","role","onClick"],"sources":["C:/Users/ing/Documents/M1_DEV/Rendu/composants/back/GetAllUsers.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { collection, getDocs, deleteDoc, doc, updateDoc } from \"firebase/firestore\";\r\nimport db from '../config';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Link } from 'react-router-dom';\r\nimport './GetAllUsers.css'; \r\nimport { Button as PaperButton } from 'react-native-paper';\r\n\r\nconst GetAllUsers = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const navigation = useNavigation(); \r\n\r\n\r\n    useEffect(() => {\r\n        const fetchOeuvres = async () => {\r\n            const oeuvresCollection = collection(db, \"users\");\r\n            const snapshot = await getDocs(oeuvresCollection);\r\n\r\n            const oeuvresData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n            setUsers(oeuvresData);\r\n        }\r\n\r\n        fetchOeuvres();\r\n    }, []);\r\n\r\n    const handleDelete = async (id) => {\r\n        await deleteDoc(doc(db, \"users\", id));\r\n        setUsers(prevState => prevState.filter(oeuvre => oeuvre.id !== id));\r\n    }\r\n\r\n    const handleEdit = async (id, field, value) => {\r\n        const oeuvreRef = doc(db, \"users\", id);\r\n        await updateDoc(oeuvreRef, { [field]: value });\r\n        setUsers(prevState => prevState.map(oeuvre => oeuvre.id === id ? { ...oeuvre, [field]: value } : oeuvre));\r\n    }\r\n\r\n    return (\r\n        <div className=\"art-exhibition\"> \r\n              <PaperButton\r\n                mode=\"contained\"\r\n                onPress={() => navigation.navigate('PostUsers')}\r\n                style={{ marginBottom: 10 }}\r\n                className=\"button\"\r\n            >\r\n                Ajouter un nouveau User\r\n            </PaperButton>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>Email</th>\r\n                        <th>Role</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map(oeuvre => (\r\n                        <tr key={oeuvre.id}>\r\n                            <td>{oeuvre.id}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'email', e.target.textContent)}>{oeuvre.email}</td>\r\n                            <td contentEditable onBlur={(e) => handleEdit(oeuvre.id, 'role', e.target.textContent)}>{oeuvre.role}</td>\r\n                            <td><button onClick={() => handleDelete(oeuvre.id)}>Supprimer</button></td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GetAllUsers;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}